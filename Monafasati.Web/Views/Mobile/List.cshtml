@model IEnumerable<Monafasati.Core.Entity.Monafsa>
@{
    ViewData["Title"] = "Home Page";
}

@{
    ViewData["Title"] = "Home Page";
}

<div class="card">
    <div class="card-header">
        <a asp-action="New" class="btn btn-primary float-right"> مناقصة جديده</a>

    </div>
    <div class="card-body">
        @*<div class="d-none d-sm-block">
            <table class="table table-striped table-bordered table-responsive text-right" id="Monafsta_Table">
                <thead>
                    <tr>
                        <th>@Html.DisplayNameFor(model => model.Name) </th>
                        <th>@Html.DisplayNameFor(model => model.Statu)</th>
                        <th>@Html.DisplayNameFor(model => model.Price)</th>
                        <th>@Html.DisplayNameFor(model => model.LastDate)</th>
                        <th>@Html.DisplayNameFor(model => model.PdfFile)</th>
                        <th>حذف</th>

                    </tr>
                </thead>
                <tbody>
                    @foreach (var Mo in Model)
                    {
                        <tr>
                            <td><a asp-action="Details" asp-route-id="@Mo.Id">@Mo.Name</a></td>
                            <td>@Mo.Statu.Name</td>
                            <td>@Mo.Price</td>
                            <td>@Mo.LastDate</td>
                            <td><a class="btn btn-outline-info" href="../Upload/@Mo.PdfFile">الملف</a></td>
                            <td><a class="btn btn-outline-danger" asp-action="Delete" asp-controller="Monafsas" asp-route-id="@Mo.Id"><i class="far fa-trash-alt"></i></a></td>
                        </tr>

                    }
                </tbody>
            </table>
        </div>*@
        <div class="Hd-block Hd-sm-none">

            <table class="table table-striped table-bordered table-responsive text-right" id="Monafsta_Table_Mobile">
                <thead>
                    <tr>
                        <th>@Html.DisplayNameFor(model => model.Name) </th>
                        <th>@Html.DisplayNameFor(model => model.Statu)</th>
                        <th>@Html.DisplayNameFor(model => model.Engineer.Name)</th>
                        @if (User.IsInRole("Eng"))
                        {
                            <th>@Html.DisplayNameFor(model => model.LastDate)</th>
                        }

                    </tr>
                </thead>
                <tbody>
                    @foreach (var Mo in Model.OrderByDescending(c => c.LastDate))
                    {
                        @if (Mo.LastDate <= DateTime.Now.AddDays(3))
                        {
                            <tr class="bg-warning">
                                <td><a asp-action="Details" asp-route-id="@Mo.Id">@Mo.Name</a></td>
                                <td>@Mo.Statu.Name</td>
                                <td>@Mo.Engineer.Name</td>
                                @if (User.IsInRole("Eng"))
                                {
                                    <td>@Mo.LastDate.ToString("dd/MM/yyyy")</td>
                                }
                            </tr>
                        }
                        else
                        {
                            <tr>
                                <td><a asp-action="Details" asp-route-id="@Mo.Id">@Mo.Name</a></td>
                                <td>@Mo.Statu.Name</td>
                                <td>@Mo.Engineer.Name</td>
                                @if (User.IsInRole("Eng"))
                                {
                                    <td>@Mo.LastDate.ToString("dd/MM/yyyy")</td>
                                }
                            </tr>

                        }

                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
@section Scripts{
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.21/b-1.6.3/b-colvis-1.6.3/b-flash-1.6.3/b-html5-1.6.3/b-print-1.6.3/r-2.2.5/datatables.min.css" />

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.21/b-1.6.3/b-colvis-1.6.3/b-flash-1.6.3/b-html5-1.6.3/b-print-1.6.3/r-2.2.5/datatables.min.js"></script>


    <script>
        $(document).ready(function () {
            $('#Monafsta_Tablee').DataTable(
                {
                    "order": [[2, "desc"]],
                    dom: 'Bfrtip',
                    buttons: [
                        'excelHtml5',
                        'csvHtml5',
                        'pdfHtml5'
                    ]
                }


            );
        });
    </script>
    <script>
        $(document).ready(function () {
            $('#Monafsta_Table_Mobile').DataTable(
                {
                    "order": [[3, "asc"]],
                    //"createdRow": function (row, data, dataIndex) {
                    //    if (data[2] == `خالد ابراهيم`) {
                    //        $(row).addClass('bg-info');
                    //    }
                    //}

                }
            );
        });
    </script>
}